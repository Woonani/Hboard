### 집 환경 설정

# 디렉토리 구조
C:.
?  docker-compose.yaml
?  
??nginx
?  ??conf.d
?          default.conf
?          
??php
?      Dockerfile
?      
??web
    ??.vscode
    ?      settings.json
    ?      
    ??frontend
        ?  .gitignore
        ?  404.html
        ?  index.html
        ?  
        ??controller
        ?      step_02.php
        ?      step_03.php
        ?      
        ??include
        ?      footer.php
        ?      header.php
        ?      
        ??js
        ?  ??member
        ?          step_01.js
        ?          step_02.js
        ?          step_03.js
        ?          
        ??member
        ?      index.php
        ?      step_01.html
        ?      step_02.html
        ?      step_03.html
        ?      
        ??model
               dbconfig.php
               index.html
        
                    



# docker-compose.yaml
services:
  nginxweb:
    image: nginx:latest
    ports:
      - "80:80"
    volumes:
      - ./nginx/conf.d/default.conf:/etc/nginx/conf.d/default.conf
      - ./web/frontend:/var/www/html/app
  phpapp:
    build:
      dockerfile: ./php/Dockerfile
    volumes:
      - ./web/frontend:/var/www/html/app

# default.conf
server {
    listen       80;
    server_name  test.hackers.com;
    
    root /var/www/html/app;
    index index.html;

    location = / {
        try_files /index.html =404;
    }

    location ~ \.php$ {
        fastcgi_pass    phpapp:9000;
        fastcgi_index   index.php;
        fastcgi_param   REQUEST_METHOD $request_method;
        fastcgi_param   SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include         fastcgi_params;
    }

    location / {
        try_files $uri/ /index.php?query_string;
    }
}

# Dockerfile
FROM php:8.2-fpm-alpine

RUN docker-php-ext-install pdo pdo_mysql

